<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neighborhood-inclusion in networks • netrankr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">netrankr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    How To
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/neighborhood_inclusion.html">Neighborhood-Inclusion</a>
    </li>
    <li>
      <a href="../articles/threshold_graph.html">Uniquely Ranked Graphs</a>
    </li>
    <li>
      <a href="../articles/positional_dominance.html">Positional Dominance</a>
    </li>
    <li>
      <a href="../articles/indirect_relations.html">Indirect Relations in Networks</a>
    </li>
    <li>
      <a href="../articles/centrality_indices.html">Centrality Indices</a>
    </li>
    <li>
      <a href="../articles/partial_centrality.html">Partial Centrality</a>
    </li>
    <li>
      <a href="../articles/probabilistic_cent.html">Probabilistic Centrality</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/use_case.html">Use Case</a>
</li>
<li>
  <a href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li>
  <a href="http://schochastics.net/sna/periodic.html">Periodic Table</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
<li>
  <a href="https://github.com/schochastics/netrankr">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Neighborhood-inclusion in networks</h1>
            
          </div>

    
    
<div class="contents">
<p>This vignette describes the concept of neighborhood-inclusion, its connection with network centrality and gives some example use cases with the <code>netrankr</code> package. The partial ranking induced by neighborhood-inclusion can be used to assess <a href="partial_centrality.html">partial centrality</a> or compute <a href="probabilistic_cent.html">probabilistic centrality</a>.</p>
<hr>
<div id="theoretical-background" class="section level2">
<h2 class="hasAnchor">
<a href="#theoretical-background" class="anchor"></a>Theoretical Background</h2>
<p>In an undirected graph <span class="math inline">\(G=(V,E)\)</span>, the <em>neighborhood</em> of a node <span class="math inline">\(u \in V\)</span> is defined as <span class="math display">\[N(u)=\lbrace w : \lbrace u,w \rbrace \in E \rbrace\]</span> and its <em>closed neighborhood</em> as <span class="math inline">\(N[v]=N(v) \cup \lbrace v \rbrace\)</span>. If the neighborhood of a node <span class="math inline">\(u\)</span> is a subset of the closed neighborhood of a node <span class="math inline">\(v\)</span>, <span class="math inline">\(N(u)\subseteq N[v]\)</span>, we speak of <em>neighborhood inclusion</em>. This concept defines a dominance relation among nodes in a network. We say that <span class="math inline">\(u\)</span> is <em>dominated</em> by <span class="math inline">\(v\)</span> if <span class="math inline">\(N(u)\subseteq N[v]\)</span>. Neighborhood-inclusion induces a partial ranking on the vertices of a network. That is, (usually) some (if not most!) pairs of vertices are incomparable, such that neither <span class="math inline">\(N(u)\subseteq N[v]\)</span> nor <span class="math inline">\(N(v)\subseteq N[u]\)</span> holds. There is, however, a special graph class where all pairs are comparable (found in <a href="threshold_graph.html">this</a> vignette).</p>
<p>The importance of neighborhood-inclusion is given by the following result:</p>
<p><span class="math display">\[
N(u)\subseteq N[v] \implies c(u)\leq c(v),
\]</span> where <span class="math inline">\(c\)</span> is a centrality index defined on special path algebras. These include many of the well known measures like closeness (and variants), betweenness (and variants) as well as many walk-based indices (eigenvector and subgraph centrality, total communicability,…).</p>
<p>Very informally, if <span class="math inline">\(u\)</span> is dominated by <span class="math inline">\(v\)</span>, then u is less central than <span class="math inline">\(v\)</span> no matter which centrality index is used, that fulfill the requirement. While this is the key result, this short description leaves out many theoretical considerations. These and more can be found in</p>
<blockquote>
<p>Schoch, David &amp; Brandes, Ulrik. (2016). Re-conceptualizing centrality in social networks. <em>European Journal of Appplied Mathematics</em>, <strong>27</strong>(6), 971–985. (<a href="https://doi.org/10.1017/S0956792516000401">link</a>)</p>
</blockquote>
<hr>
</div>
<div id="neighborhood-inclusion-in-the-netrankr-package" class="section level2">
<h2 class="hasAnchor">
<a href="#neighborhood-inclusion-in-the-netrankr-package" class="anchor"></a>Neighborhood-inclusion in the <code>netrankr</code> Package</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(netrankr)
<span class="kw">library</span>(igraph)
<span class="kw">set.seed</span>(<span class="dv">1886</span>) <span class="co">#for reproducibility</span></code></pre></div>
<p>We work with the following simple graph.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">g &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/make_empty_graph">graph.empty</a></span>(<span class="dt">n=</span><span class="dv">11</span>,<span class="dt">directed =</span> <span class="ot">FALSE</span>)
g &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/add_edges">add_edges</a></span>(g,<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">11</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">11</span>,<span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">9</span>,<span class="dv">5</span>,<span class="dv">11</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">6</span>,<span class="dv">8</span>,
                   <span class="dv">6</span>,<span class="dv">10</span>,<span class="dv">6</span>,<span class="dv">11</span>,<span class="dv">7</span>,<span class="dv">9</span>,<span class="dv">7</span>,<span class="dv">10</span>,<span class="dv">7</span>,<span class="dv">11</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">10</span>,<span class="dv">9</span>,<span class="dv">10</span>))
<span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/V">V</a></span>(g)<span class="op">$</span>name &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">11</span>

<span class="kw">plot</span>(g,
     <span class="dt">vertex.color=</span><span class="st">"black"</span>,<span class="dt">vertex.label.color=</span><span class="st">"white"</span>, <span class="dt">vertex.size=</span><span class="dv">16</span>,<span class="dt">vertex.label.cex=</span><span class="fl">0.75</span>,
     <span class="dt">edge.color=</span><span class="st">"black"</span>,
     <span class="dt">margin=</span><span class="dv">0</span>,<span class="dt">asp=</span><span class="fl">0.5</span>)</code></pre></div>
<p><img src="neighborhood_inclusion_files/figure-html/simple_graph-1.png" width="288" style="display: block; margin: auto;"></p>
<p>We can compare neighborhoods manually with the <code>neighborhood</code> function of the <code>igraph</code> package. Note the <code>mindist</code> parameter to distinguish between open and closed neighborhood.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">u &lt;-<span class="st"> </span><span class="dv">3</span>
v &lt;-<span class="st"> </span><span class="dv">5</span>
Nu &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/ego">neighborhood</a></span>(g,<span class="dt">order=</span><span class="dv">1</span>,<span class="dt">nodes=</span>u,<span class="dt">mindist =</span> <span class="dv">1</span>)[[<span class="dv">1</span>]] <span class="co">#N(u) </span>
Nv &lt;-<span class="st"> </span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/ego">neighborhood</a></span>(g,<span class="dt">order=</span><span class="dv">1</span>,<span class="dt">nodes=</span>v,<span class="dt">mindist =</span> <span class="dv">0</span>)[[<span class="dv">1</span>]] <span class="co">#N[v] </span>

Nu</code></pre></div>
<pre><code>## + 2/11 vertices, named, from a0884b3:
## [1] 5  11</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Nv</code></pre></div>
<pre><code>## + 4/11 vertices, named, from a0884b3:
## [1] 5  3  9  11</code></pre>
<p>Although it is obvious that <code>Nu</code> is a subset of <code>Nv</code>, we can verify it with <code>R</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(Nu<span class="op">%in%</span>Nv)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Checking all pairs of nodes can efficiently be done with the <code><a href="../reference/neighborhood_inclusion.html">neighborhood_inclusion()</a></code> function from the <code>netrankr</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">P &lt;-<span class="st"> </span><span class="kw"><a href="../reference/neighborhood_inclusion.html">neighborhood_inclusion</a></span>(g)
P</code></pre></div>
<pre><code>##       [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11]
##  [1,]    0    0    1    0    1    1    1    0    0     0     1
##  [2,]    0    0    0    1    0    0    0    1    0     0     0
##  [3,]    0    0    0    0    1    0    0    0    0     0     1
##  [4,]    0    0    0    0    0    0    0    0    0     0     0
##  [5,]    0    0    0    0    0    0    0    0    0     0     0
##  [6,]    0    0    0    0    0    0    0    0    0     0     0
##  [7,]    0    0    0    0    0    0    0    0    0     0     0
##  [8,]    0    0    0    0    0    0    0    0    0     0     0
##  [9,]    0    0    0    0    0    0    0    0    0     0     0
## [10,]    0    0    0    0    0    0    0    0    0     0     0
## [11,]    0    0    0    0    0    0    0    0    0     0     0</code></pre>
<p>If an entry <code>P[u,v]</code> is equal to one, we have <span class="math inline">\(N(u)\subseteq N[v]\)</span>.</p>
<p>The function <code><a href="../reference/dominance_graph.html">dominance_graph()</a></code> can alternatively be used to visualize the neighborhood inclusion as a directed graph.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">g.dom &lt;-<span class="st"> </span><span class="kw"><a href="../reference/dominance_graph.html">dominance_graph</a></span>(P)

<span class="kw">plot</span>(g.dom,
     <span class="dt">vertex.color=</span><span class="st">"black"</span>,<span class="dt">vertex.label.color=</span><span class="st">"white"</span>, <span class="dt">vertex.size=</span><span class="dv">16</span>, <span class="dt">vertex.label.cex=</span><span class="fl">0.75</span>,
     <span class="dt">edge.color=</span><span class="st">"black"</span>, <span class="dt">edge.arrow.size=</span><span class="fl">0.5</span>,<span class="dt">margin=</span><span class="dv">0</span>,<span class="dt">asp=</span><span class="fl">0.5</span>)</code></pre></div>
<p><img src="neighborhood_inclusion_files/figure-html/dominance_graph-1.png" width="480" style="display: block; margin: auto;"></p>
<div id="centrality-and-neighborhood-inclusion" class="section level3">
<h3 class="hasAnchor">
<a href="#centrality-and-neighborhood-inclusion" class="anchor"></a>Centrality and Neighborhood-inclusion</h3>
<p>We start by calculating some standard measures of centrality found in the <code>ìgraph</code> package for our example network. Note that the <code>netrankr</code> package also implements a great variety of indices, but they need further specifications described in <a href="centrality_indices.html">this</a> vignette.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cent.df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">vertex=</span><span class="dv">1</span><span class="op">:</span><span class="dv">11</span>,
  <span class="dt">degree=</span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/degree">degree</a></span>(g),
  <span class="dt">betweenness=</span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/betweenness">betweenness</a></span>(g),
  <span class="dt">closeness=</span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/closeness">closeness</a></span>(g),
  <span class="dt">eigenvector=</span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/eigen_centrality">eigen_centrality</a></span>(g)<span class="op">$</span>vector,
  <span class="dt">subgraph=</span><span class="kw"><a href="http://www.rdocumentation.org/packages/igraph/topics/subgraph_centrality">subgraph_centrality</a></span>(g)
)

<span class="co">#rounding for better readability</span>
cent.df.rounded &lt;-<span class="st"> </span><span class="kw">round</span>(cent.df,<span class="dv">4</span>) 
cent.df.rounded</code></pre></div>
<pre><code>##    vertex degree betweenness closeness eigenvector subgraph
## 1       1      1      0.0000    0.0370      0.2260   1.8251
## 2       2      1      0.0000    0.0294      0.0646   1.5954
## 3       3      2      0.0000    0.0400      0.3786   3.1486
## 4       4      2      9.0000    0.0400      0.2415   2.4231
## 5       5      3      3.8333    0.0500      0.5709   4.3871
## 6       6      4      9.8333    0.0588      0.9847   7.8073
## 7       7      4      2.6667    0.0526      1.0000   7.9394
## 8       8      4     16.3333    0.0556      0.8386   6.6728
## 9       9      4      7.3333    0.0556      0.9114   7.0327
## 10     10      4      1.3333    0.0526      0.9986   8.2421
## 11     11      5     14.6667    0.0556      0.8450   7.3896</code></pre>
<p>Notice how for each centrality index, different vertices are considered to be the most central node. The most central from degree to subgraph centrality are <span class="math inline">\(11\)</span>, <span class="math inline">\(8\)</span>, <span class="math inline">\(6\)</span>, <span class="math inline">\(7\)</span> and <span class="math inline">\(10\)</span>. Note that only <em>undominated</em> vertices can achieve the highest score for any reasonable index. As soon as a vertex is dominated by at least one other, it will always be ranked below the dominator. We can check for undominated vertices simply by forming the row Sums in <code>P</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">which</span>(<span class="kw">rowSums</span>(P)<span class="op">==</span><span class="dv">0</span>)</code></pre></div>
<pre><code>## [1]  4  5  6  7  8  9 10 11</code></pre>
<p>8 nodes are undominated in the graph. It is thus entirely possible to find indices that would also rank <span class="math inline">\(4, 5\)</span> and <span class="math inline">\(9\)</span> on top.</p>
<p>Besides the top ranked nodes, we can check if the entire partial ranking <code>P</code> is preserved in each centrality ranking. If there exists a pair <span class="math inline">\(u\)</span> and <span class="math inline">\(v\)</span> and index <span class="math inline">\(c()\)</span> such that <span class="math inline">\(N(u)\subseteq N[v]\)</span> but <span class="math inline">\(c(v)&gt;c(u)\)</span>, we do not consider <span class="math inline">\(c\)</span> to be a valid index.</p>
<p>In our example, we considered vertex <span class="math inline">\(3\)</span> and <span class="math inline">\(5\)</span>, where <span class="math inline">\(3\)</span> was dominated by <span class="math inline">\(5\)</span>. It is easy to verify that all centrality scores of <span class="math inline">\(5\)</span> are in fact greater than the ones of <span class="math inline">\(3\)</span> by inspecting the respective rows in the table. To check all pairs, we use the function <code>is_preserved</code>. The function takes a partial ranking, as induced by neighborhood inclusion, and a score vector of a centrality index and checks if <code>P[i,j]==1 &amp; scores[i]&gt;scores[j]</code> is <code>FALSE</code> for all pairs <code>i</code> and <code>j</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">apply</span>(cent.df[,<span class="dv">2</span><span class="op">:</span><span class="dv">6</span>],<span class="dv">2</span>,<span class="cf">function</span>(x) <span class="kw"><a href="../reference/is_preserved.html">is_preserved</a></span>(P,x))</code></pre></div>
<pre><code>##      degree betweenness   closeness eigenvector    subgraph 
##        TRUE        TRUE        TRUE        TRUE        TRUE</code></pre>
<p>All considered indices preserve the neighborhood inclusion preorder on the example network.</p>
<p><em>NOTE</em>: Preserving neighborhood inclusion on <strong>one</strong> network does not guarantee that an index preserves it on <strong>all</strong> networks. For more details refer to the paper cited in the first section.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#theoretical-background">Theoretical Background</a></li>
      <li><a href="#neighborhood-inclusion-in-the-netrankr-package">Neighborhood-inclusion in the <code>netrankr</code> Package</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by David Schoch.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
