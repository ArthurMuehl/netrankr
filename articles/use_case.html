<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="netrankr">
<title>Use Case: Florentine Families • netrankr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.7/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.7/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.7/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Use Case: Florentine Families">
<meta property="og:description" content="netrankr">
<meta property="og:image" content="https://schochastics.github.io/netrankr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">netrankr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorials">Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorials">
    <a class="dropdown-item" href="../articles/neighborhood_inclusion.html">Neighborhood-Inclusion</a>
    <a class="dropdown-item" href="../articles/threshold_graph.html">Uniquely Ranked Graphs</a>
    <a class="dropdown-item" href="../articles/positional_dominance.html">Positional Dominance</a>
    <a class="dropdown-item" href="../articles/indirect_relations.html">Indirect Relations in Networks</a>
    <a class="dropdown-item" href="../articles/centrality_indices.html">Centrality Indices</a>
    <a class="dropdown-item" href="../articles/partial_centrality.html">Partial Centrality</a>
    <a class="dropdown-item" href="../articles/probabilistic_cent.html">Probabilistic Centrality</a>
    <div class="dropdown-divider"></div>
    <a class="external-link dropdown-item" href="http://blog.schochastics.net/post/network-centrality-in-r-introduction/">Blog Post I</a>
    <a class="external-link dropdown-item" href="http://blog.schochastics.net/post/network-centrality-in-r-neighborhood-inclusion/">Blog Post II</a>
    <a class="external-link dropdown-item" href="http://blog.schochastics.net/post/network-centrality-in-r-new-ways-of-measuring-centrality/">Blog Post III</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/use_case.html">Use Case</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/benchmarks.html">Benchmarks</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://schochastics.net/sna/periodic.html">Periodic Table</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/schochastics/netrankr">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Use Case: Florentine Families</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/schochastics/netrankr/blob/HEAD/vignettes/use_case.Rmd" class="external-link"><code>vignettes/use_case.Rmd</code></a></small>
      <div class="d-none name"><code>use_case.Rmd</code></div>
    </div>

    
    
<p>This vignette describes a typical use case of the
<code>netrankr</code> package. It contrasts the usual centrality
analysis based on indices with the dominance based assessment. It is
advisable to read the other vignettes before going through this
example.</p>
<hr>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r.igraph.org/" class="external-link">igraph</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/schochastics/netrankr/" class="external-link">netrankr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>For this tutorial, we use the famous <em>florentine families</em>
dataset (Padget &amp; Ansell, 1993). The marriage links of families
together with the wealth attribute are included in the
<code>netrankr</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"florentine_m"</span><span class="op">)</span></span>
<span><span class="co"># Delete Pucci family (isolated)</span></span>
<span><span class="va">florentine_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/delete_vertices.html" class="external-link">delete_vertices</a></span><span class="op">(</span><span class="va">florentine_m</span>, <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/degree.html" class="external-link">degree</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## This graph was created by an old(er) igraph version.</span></span>
<span><span class="co">##   Call upgrade_graph() on it to use with the current igraph version</span></span>
<span><span class="co">##   For now we convert it on the fly...</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># plot the graph (label size proportional to wealth)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">111</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">florentine_m</span>,</span>
<span>  vertex.label.cex <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span> <span class="op">*</span> <span class="fl">0.01</span>,</span>
<span>  vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  vertex.color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  vertex.frame.color <span class="op">=</span> <span class="st">"gray"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="use_case_files/figure-html/plot-1.png" width="480" style="display: block; margin: auto;"></p>
<p>We use this dataset below to illustrate how a dominance based
assessment of centrality offers an alternative approach to centrality in
two ways:</p>
<ul>
<li>Are the Medici universally the most central family?</li>
<li>Using centrality as explanatory variable (Can centrality explain the
wealth attribute?)</li>
</ul>
<hr>
</div>
<div class="section level2">
<h2 id="most-central-family-index-approach">Most central family (Index approach)<a class="anchor" aria-label="anchor" href="#most-central-family-index-approach"></a>
</h2>
<p>The network is often used to benchmark new centrality indices. The
premise is that the Medici should always emerge as one of the most
central once (if not <strong>the</strong> most central).</p>
<p>We start by applying some of the standard centrality indices given in
the <code>igraph</code> package.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cent.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  degree <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/degree.html" class="external-link">degree</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span>,</span>
<span>  betweenness <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/betweenness.html" class="external-link">betweenness</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span>,</span>
<span>  closeness <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/closeness.html" class="external-link">closeness</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span>,</span>
<span>  eigenvector <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/eigen_centrality.html" class="external-link">eigen_centrality</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">vector</span>,</span>
<span>  subgraph <span class="op">=</span> <span class="fu"><a href="https://r.igraph.org/reference/subgraph_centrality.html" class="external-link">subgraph_centrality</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># most central family according to the 5 indices</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">cent.df</span>, <span class="fl">2</span>, <span class="va">which.max</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Medici" "Medici" "Medici" "Medici" "Medici"</span></span></code></pre>
<p>In all cases, the Medici are considered to be the most central
family. However, it is possible to find indices that rank other families
on top. An example is <em>odd subgraph centrality</em>, which can be
assembled with the <code>netrankr</code> package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># odd subgraph centrality</span></span>
<span><span class="va">sc_odd</span> <span class="op">&lt;-</span> <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"walks"</span>, FUN <span class="op">=</span> <span class="va">walks_exp_odd</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/aggregate_positions.html">aggregate_positions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"self"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># family with highest score</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">sc_odd</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Strozzi"</span></span></code></pre>
<p>In this example, the Strozzi family are considered to be the most
central family and the Medici are ranked third.</p>
<p>Although we have found <span class="math inline">\(5\)</span> indices
that consider the Medici the most central family, we can not guarantee,
that there do not exist hundreds (or thousands?) of indices that would
give an entirely different result.</p>
<hr>
</div>
<div class="section level2">
<h2 id="most-central-family-dominance-approach">Most central family (Dominance approach)<a class="anchor" aria-label="anchor" href="#most-central-family-dominance-approach"></a>
</h2>
<p>We start by calculating the neighborhood-inclusion preorder, the most
general requirement for any centrality index.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">P</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/neighborhood_inclusion.html">neighborhood_inclusion</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span></span></code></pre></div>
<p>With the function <code><a href="../reference/comparable_pairs.html">comparable_pairs()</a></code> we can assess how
many pairs of families are already ordered, before applying any
index.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/comparable_pairs.html">comparable_pairs</a></span><span class="op">(</span><span class="va">P</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.152381</span></span></code></pre>
<p>Only around 15% of pairs of families are comparable, leaving 85% of
pairs of families that could be ordered (basically) arbitrarily.</p>
<p>If we want to visually assess the dominance relations we can use the
function <code><a href="../reference/dominance_graph.html">dominance_graph()</a></code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dominance_graph.html">dominance_graph</a></span><span class="op">(</span><span class="va">P</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span><span class="op">$</span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">113</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">d</span>,</span>
<span>  vertex.label.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  vertex.color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  vertex.frame.color <span class="op">=</span> <span class="st">"gray"</span>,</span>
<span>  edge.arrow.size <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="use_case_files/figure-html/dom_graph-1.png" width="480" style="display: block; margin: auto;"></p>
<p>The Castellan family neither dominates nor is dominated by any other
family. This means, that we can find indices that potentially rank them
on top or on the bottom, or anything in between.</p>
<p>To better assess the potential ranks of nodes, we can plot the rank
intervals</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/rank_intervals.html">rank_intervals</a></span><span class="op">(</span><span class="va">P</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="use_case_files/figure-html/rk_inter-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Observe how big the intervals are, indicating that there is ample
scope to rank the families differently. These intervals, however, only
give us a rough estimate of this arbitrariness and not any rank
probabilities. To get all exact probabilities, we use the function
<code><a href="../reference/exact_rank_prob.html">exact_rank_prob()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/exact_rank_prob.html">exact_rank_prob</a></span><span class="op">(</span><span class="va">P</span><span class="op">)</span></span></code></pre></div>
<p>There are 3,972,630,480 different possibilities to rank the families!
(<em>the value is stored in <code>res$lin.ext</code>. </em>). This means
that theoretically, we can find almost 4 Billion indices that rank the
families differently.</p>
<p>The <em>rank probabilities</em> of families can be found in
<code>res$rank.prob</code>. They are returned as a matrix where rows are
families and columns are ranks. That is, an entry in row <span class="math inline">\(u\)</span> and column <span class="math inline">\(k\)</span> gives the probability that <span class="math inline">\(u\)</span> has rank <span class="math inline">\(k\)</span> (larger <span class="math inline">\(k\)</span> indicate higher ranks) Mostly, you will
be interested in the probability to be the most central node of a
network. Below, we calculate these probability for all families and
return the one’s that have a higher probability than <span class="math inline">\(0.1\)</span>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">top_rank_prob</span> <span class="op">&lt;-</span> <span class="va">res</span><span class="op">$</span><span class="va">rank.prob</span><span class="op">[</span>, <span class="fl">15</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">top_rank_prob</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">top_rank_prob</span><span class="op">[</span><span class="va">top_rank_prob</span> <span class="op">&gt;</span> <span class="fl">0.1</span><span class="op">]</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  Albizzi Guadagni   Medici Salviati  Strozzi </span></span>
<span><span class="co">##    0.109    0.106    0.123    0.111    0.133</span></span></code></pre>
<p>The Strozzi family, with <span class="math inline">\(0.13\)</span>,
has the highest probability to be top ranked, followed by the Medici
with <span class="math inline">\(0.12\)</span>.</p>
<p>If we are only interested in a subset of nodes, in our case maybe the
Strozzi and Medici, we can assess the <em>relative rank
probabilities</em> in <code>res$relative.rank</code>. Again,
probabilities are returned as matrix objects, where an entry in row
<span class="math inline">\(u\)</span> and column <span class="math inline">\(v\)</span> gives the probability that <span class="math inline">\(u\)</span> is ranked below <span class="math inline">\(v\)</span>. Below we calculate this probability
for the Strozzi and Medici.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id_strozzi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">name</span> <span class="op">==</span> <span class="st">"Strozzi"</span><span class="op">)</span></span>
<span><span class="va">id_medici</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">name</span> <span class="op">==</span> <span class="st">"Medici"</span><span class="op">)</span></span>
<span><span class="va">res</span><span class="op">$</span><span class="va">relative.rank</span><span class="op">[</span><span class="va">id_strozzi</span>, <span class="va">id_medici</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.5219845</span></span></code></pre>
<p>The probability that the Strozzi are less central than the Medici is
0.52 and thus very close to a “fifty-fifty” chance.</p>
<p>The last result of interest returned by
<code><a href="../reference/exact_rank_prob.html">exact_rank_prob()</a></code> are the <em>expected ranks</em> in
<code>res$expected.rank</code>. The expected ranks, as the name
indicates, returns the ranks that we expect families to have in a
centrality ranking.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Name</th>
<th align="right">Expected</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Medici</td>
<td align="right">11.09</td>
</tr>
<tr class="even">
<td align="left">Albizzi</td>
<td align="right">10.72</td>
</tr>
<tr class="odd">
<td align="left">Strozzi</td>
<td align="right">10.67</td>
</tr>
<tr class="even">
<td align="left">Salviati</td>
<td align="right">10.60</td>
</tr>
<tr class="odd">
<td align="left">Guadagni</td>
<td align="right">10.51</td>
</tr>
<tr class="even">
<td align="left">Tornabuon</td>
<td align="right">10.11</td>
</tr>
<tr class="odd">
<td align="left">Bischeri</td>
<td align="right">9.64</td>
</tr>
<tr class="even">
<td align="left">Barbadori</td>
<td align="right">9.37</td>
</tr>
<tr class="odd">
<td align="left">Ridolfi</td>
<td align="right">9.37</td>
</tr>
<tr class="even">
<td align="left">Castellan</td>
<td align="right">8.00</td>
</tr>
<tr class="odd">
<td align="left">Peruzzi</td>
<td align="right">5.33</td>
</tr>
<tr class="even">
<td align="left">Pazzi</td>
<td align="right">4.54</td>
</tr>
<tr class="odd">
<td align="left">Ginori</td>
<td align="right">4.01</td>
</tr>
<tr class="even">
<td align="left">Lambertes</td>
<td align="right">3.28</td>
</tr>
<tr class="odd">
<td align="left">Acciaiuol</td>
<td align="right">2.74</td>
</tr>
</tbody>
</table>
<p>Although the Strozzi have a higher probability to be the most central
family, over all we still expect the Medici to be the most central.</p>
<p>This very general assessment gives us a general idea of the scope of
potential centrality analyses. The more possible rankings we have (as in
this case!) the more unreliable an index driven approach can be. We will
explore this in more detail in the following section.</p>
<hr>
</div>
<div class="section level2">
<h2 id="centrality-as-explanatory-variable-index-approach">Centrality as explanatory variable (Index approach)<a class="anchor" aria-label="anchor" href="#centrality-as-explanatory-variable-index-approach"></a>
</h2>
<p>Usually, we are not simply interested in a ranking of nodes, but we
rather would like to use centrality to explain certain node attributes.
In our case, we might be interested in the question: “can an index
explain the wealth of families?”, or if we already have a more concrete
idea “can proximity to other families explain the wealth attribute?”</p>
<p>“Proximity” can be translated to the graph-theoretic concept of
shortest path distances, such that closeness centrality would be an
adequate candidate as an index. We here use the pipeline approach of the
<code>netrankr</code> package instead of the <code><a href="https://r.igraph.org/reference/closeness.html" class="external-link">closeness()</a></code>
function of <code>igraph</code>. The reasons will become evident in the
next section.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Closeness</span></span>
<span><span class="va">c_C</span> <span class="op">&lt;-</span> <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/aggregate_positions.html">aggregate_positions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"invsum"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">c_C</span>, <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.08823953</span></span></code></pre>
<p>The correlation between closeness and wealth (0.0882) is far to low
to constitute that “proximity” is related to wealth. However, there
exist various other indices, that are based on the shortest path
distances in a graph. Refer to the literature for more details on these
indices.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># harmonic closeness</span></span>
<span><span class="va">c_HC</span> <span class="op">&lt;-</span> <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span>, FUN <span class="op">=</span> <span class="va">dist_inv</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/aggregate_positions.html">aggregate_positions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span>
<span><span class="co"># residual closeness (Dangalchev,2006)</span></span>
<span><span class="va">c_RC</span> <span class="op">&lt;-</span> <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span>, FUN <span class="op">=</span> <span class="va">dist_2pow</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/aggregate_positions.html">aggregate_positions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># integration centrality (Valente &amp; Foreman, 1998)</span></span>
<span><span class="va">dist_integration</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="va">c_IN</span> <span class="op">&lt;-</span> <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span>, FUN <span class="op">=</span> <span class="va">dist_integration</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/aggregate_positions.html">aggregate_positions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">c_HC</span>, <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">c_RC</span>, <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">c_IN</span>, <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.09756214 0.11594338 0.08823953</span></span></code></pre>
<p>The highest correlation (0.1159) is achieved for residual closeness,
however, this is still too low to conclude that proximity is related to
wealth.</p>
<p>Besides the already considered indices, there exist further one’s
that include a free parameter. The idea is that the parameter can be
tuned to maximize the correlation between the index and the attribute
under consideration. Again, the mathematical details can be found in the
respective literature.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generalized closeness (Agneessens et al.,2017) (alpha&gt;0) sum(dist^-alpha)</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.99</span>, <span class="fl">0.01</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">scores</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">alpha</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span>, FUN <span class="op">=</span> <span class="va">dist_dpow</span>, alpha <span class="op">=</span> <span class="va">x</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/aggregate_positions.html">aggregate_positions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="va">cors_gc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span></span>
<span>  <span class="va">scores</span>, <span class="fl">2</span>,</span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_gc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">cors_gc</span><span class="op">)</span>, <span class="va">alpha</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">cors_gc</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># decay centrality (Jackson, 2010) (alpha in [0,1]) sum(alpha^dist)</span></span>
<span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.99</span>, <span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="va">scores</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">alpha</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span>, FUN <span class="op">=</span> <span class="va">dist_powd</span>, alpha <span class="op">=</span> <span class="va">x</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/aggregate_positions.html">aggregate_positions</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"sum"</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="va">cors_dc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span></span>
<span>  <span class="va">scores</span>, <span class="fl">2</span>,</span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">res_dc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">cors_dc</span><span class="op">)</span>, <span class="va">alpha</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.min.html" class="external-link">which.max</a></span><span class="op">(</span><span class="va">cors_dc</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>The highest correlation for generalized closeness is 0.1159434
achieved for <span class="math inline">\(\alpha\)</span>= 0.51</p>
<p>The highest correlation for decay centrality is 0.1159434 achieved
for <span class="math inline">\(\alpha\)</span>=0.26</p>
<p>We could know accept that there is no index based on shortest path
distances that could explain wealth. Or, we could start to craft new
indices that might yield a better correlation with wealth. However, we
then enter the dilemma that was mentioned at the end of the last
section. If we find one, we can not be certain that there might not even
be a better one out there. In contrast, if we do not succeed, we can not
guarantee that there does not exist an index with a higher
correlation.</p>
<hr>
</div>
<div class="section level2">
<h2 id="centrality-as-explanatory-variable-dominance-approach">Centrality as explanatory variable (Dominance approach)<a class="anchor" aria-label="anchor" href="#centrality-as-explanatory-variable-dominance-approach"></a>
</h2>
<p>Since we are postulating a connection between proximity and wealth,
we compute the pairwise shortest path distances as our <em>indirect
relation</em> of interest and calculate the positional dominance
relations.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D</span> <span class="op">&lt;-</span> <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/positional_dominance.html">positional_dominance</a></span><span class="op">(</span>benefit <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/comparable_pairs.html">comparable_pairs</a></span><span class="op">(</span><span class="va">D</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.152381</span></span></code></pre>
<p>Note that exactly the same pairs are comparable as for
neighborhood-inclusion. However, with one additional assumption, we will
be able to increase the number of comparable pairs significantly (and
thus reduce the space of potential rankings). By summing up distances in
various ways, as done by the indices above, we assume families to be
<em>homogeneous</em>. It doesn’t matter to whom we have a small
distance, it just matters that they are small.</p>
<p>If we can safely comply with this assumption, we can use positional
dominance <em>under total homogeneity</em>. It is important to note,
that if a family is dominated by another under this premise, it will
have a lower score in <strong>any</strong> distance based centrality
index.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">D</span> <span class="op">&lt;-</span> <span class="va">florentine_m</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/indirect_relations.html">indirect_relations</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"dist_sp"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/positional_dominance.html">positional_dominance</a></span><span class="op">(</span>benefit <span class="op">=</span> <span class="cn">F</span>, map <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/comparable_pairs.html">comparable_pairs</a></span><span class="op">(</span><span class="va">D</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.8190476</span></span></code></pre>
<p>The number of comparable pairs increased from <span class="math inline">\(0.15\)</span> to <span class="math inline">\(0.82\)</span>, thus reducing the space of
potential centrality rankings based on distances significantly.</p>
<p>We proceed to explore if there is potential for a distance based
ranking to explain wealth perfectly. This is only possible, if families
with lower wealth do not dominate wealthier family. Otherwise they would
always be ranked higher, prohibiting a perfect correlation.</p>
<p>The figure below shows the dominance relations as a directed graph,
where the x coordinate of nodes is proportional to the wealth attribute
and the y coordinate to the number of dominated families. Any edge
pointing to the left (shown in red) denotes a pair of “wrongly” ordered
families, i.e. a wealthy family is dominated by a less wealthy one.</p>
<p><img src="use_case_files/figure-html/plot%20dist_dom-1.png" width="480" style="display: block; margin: auto;"></p>
<p>In total, we find <span class="math inline">\(41\)</span> such pairs
(<span class="math inline">\(39\)</span>% of all pairs). This implies
that we are (potentially) quite far from being able to explain wealth
perfectly with shortest path distances. In the following we will explore
<em>how</em> far away.</p>
<p>We start by calculating the rank intervals to illustrate the
difference to neighborhood-inclusion.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/rank_intervals.html">rank_intervals</a></span><span class="op">(</span><span class="va">D</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="use_case_files/figure-html/rk_inter_dist-1.png" width="480" style="display: block; margin: auto;">
All intervals shrunk significantly and even correspond to a single point
for two families (Pazzi and Medici). This implies that no matter which
distance based index we use, the Pazzi family will always be ranked last
and the Medici always on top.</p>
<p>For a more exact assessment we again use the function
<code><a href="../reference/exact_rank_prob.html">exact_rank_prob()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/exact_rank_prob.html">exact_rank_prob</a></span><span class="op">(</span><span class="va">D</span><span class="op">)</span></span></code></pre></div>
<p>In total, there are 654 distance based rankings possible. This is a
huge reduction from the general case where almost <span class="math inline">\(4\)</span> billion are possible.</p>
<p>To determine the best possible correlation between wealth and any
distance based ranking, we first need to determine all 654 rankings. For
this purpose, we rerun the previous analysis with
<code>only.results=FALSE</code> to obtain the necessary data
structure.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/exact_rank_prob.html">exact_rank_prob</a></span><span class="op">(</span><span class="va">D</span>, only.results <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Now, we can use the function <code><a href="../reference/get_rankings.html">get_rankings()</a></code> which
returns all rankings as a matrix.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">all_ranks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_rankings.html">get_rankings</a></span><span class="op">(</span><span class="va">res</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">all_ranks</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]  15 654</span></span></code></pre>
<p>No we can simply loop over all rankings and calculate the correlation
between the ranking and the wealth attribute.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dist_cor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span></span>
<span>  <span class="va">all_ranks</span>, <span class="fl">2</span>,</span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, <span class="va">x</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>max_cor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dist_cor</span><span class="op">)</span>, mean_cor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">dist_cor</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##    max_cor   mean_cor </span></span>
<span><span class="co">## 0.15459118 0.04600506</span></span></code></pre>
<p>The highest achievable correlation is 0.1546.</p>
<p>We can conclude, that there can not be any distance based centrality
index that can reasonably explain the wealth attribute.</p>
<p>We can additionally consider the correlation between degree and
wealth, calculated below.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span><span class="fu"><a href="https://r.igraph.org/reference/degree.html" class="external-link">degree</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span>, <span class="fu"><a href="https://r.igraph.org/reference/V.html" class="external-link">V</a></span><span class="op">(</span><span class="va">florentine_m</span><span class="op">)</span><span class="op">$</span><span class="va">wealth</span>, method <span class="op">=</span> <span class="st">"kendall"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.1958605</span></span></code></pre>
<p>The correlation is higher than any distance based index can have.
Thus, we can additionally conclude that marriage ties are more
indicative for wealth than proximity in the marriage network.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Schoch.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
